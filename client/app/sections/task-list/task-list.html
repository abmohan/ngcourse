<div>
    <a ui-sref="profile({owner: main.user.data.username})">Edit User Profile</a></br>
    {{main.userDisplayName}}, we've got {{taskList.tasks.length}} tasks
    <br/>

   
    <div ui-view="actionArea"></div>
    <button ng-init= "taskList.hideDoneTasks=false" ng-click="taskList.toggleDoneTasks()">{{taskList.hideDoneTasks ? "Show" : "Hide"}} Done</button>
    User Filter: <input ng-model="taskList.taskFilter.owner"> <a ng-click="taskList.taskFilter.owner=''">clear</a>
    <table>
        <tr>
            <th>JSON</th>
            <th>Done</th>
            <th>Owner</th>
            <th>Task description</th>
        </tr>
        <tr ng-repeat="task in taskList.tasks | filter:taskList.taskFilter | orderBy: 'done'">
            <td>JSON: {{task|json}}</td>
            <td ng-if="task.can.edit && !task.done"><button ng-click="taskList.done(task)">Done!</button></td>
            <td ng-if="!task.can.edit || task.done"><input type="checkbox" ng-disabled="!task.can.edit" ng-model="task.done" ng-change="taskList.update(task)"></td>
            <td>{{task.owner}}</td>
            <td>{{task.description}}</td>
            <td><a ng-show="task.can.edit" ui-sref="tasks.details({_id: task._id})">edit</a>
            </td>
        </tr>
    </table>
</div>
